<!DOCTYPE html>
<html lang="ko">
<head>
  <meta charset="UTF-8">
  <title>ì´ë¯¸ì§€ ì—…ë¡œë“œ</title>
  <style>
    body { text-align:center; margin-top:40px; font-family:sans-serif; }
    button { padding:8px 14px; border:none; border-radius:8px; background:#4CAF50; color:white; }
    #result { margin-top:20px; }
  </style>
</head>
<body>
  <h2>â˜ï¸ ì´ë¯¸ì§€ ì—…ë¡œë“œ & ë¯¸ë¦¬ë³´ê¸° ë§í¬ ìƒì„±</h2>

  <input type="file" id="fileInput" accept="image/*">
  <button onclick="uploadImage()">ì—…ë¡œë“œ</button>

  <div id="result"></div>

  <script>
    async function uploadImage() {
      const file = document.getElementById("fileInput").files[0];
      if (!file) return alert("íŒŒì¼ì„ ì„ íƒí•˜ì„¸ìš”!");

      const cloudName = "dretlhsrk";
      const uploadPreset = "unsigned_preset";
      const url = `https://api.cloudinary.com/v1_1/${cloudName}/image/upload`;

      const formData = new FormData();
      formData.append("file", file);
      formData.append("upload_preset", uploadPreset);

      document.getElementById("result").textContent = "ì—…ë¡œë“œ ì¤‘...";

      const res = await fetch(url, { method: "POST", body: formData });
      const data = await res.json();

      if (data.secure_url) {
        const previewLink = `${location.origin}/view.html?img=${encodeURIComponent(data.secure_url)}`;
        document.getElementById("result").innerHTML = `
          âœ… ì—…ë¡œë“œ ì™„ë£Œ!<br>
          ğŸ”— <a href="${previewLink}" target="_blank">ë¯¸ë¦¬ë³´ê¸° í˜ì´ì§€ ì—´ê¸°</a>
        `;
      } else {
        document.getElementById("result").textContent = "ì—…ë¡œë“œ ì‹¤íŒ¨!";
      }
    }
  </script>
</body>
</html>
